/*!
 * Start Bootstrap - Bare v4.2.1 (https://startbootstrap.com/template-overviews/bare)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-bare/blob/master/LICENSE)
 */

window.onload=function(){var s,i,o,n,r,t,a=900,l=600,d=30,e=100,c=a/d,h=l/d;function f(){if(i.advance(),i.checkCollision())!function(){s.save(),s.font="bold 70px sans-serif",s.fillStyle="#000",s.textAlign="center",s.textBaseline="middle",s.strokeStyle="white",s.lineWidth=5;var t=a/2,e=l/2;s.strokeText("Game Over",t,e-180),s.fillText("Game Over",t,e-180),s.font="bold 30px sans-serif",s.strokeText("Press space to replay",t,e-120),s.fillText("Press space to replay",t,e-120),s.restore()}();else{if(i.isEatingApple(o))for(n++,i.ateApple=!0;o.setNewPosition(),o.isOnSnake(i););s.clearRect(0,0,a,l),function(){s.save(),s.font="bold 200px sans-serif",s.fillStyle="gray",s.textAlign="center",s.textBaseline="middle";var t=a/2,e=l/2;s.fillText(n.toString(),t,e),s.restore()}(),i.draw(),o.draw(),r=setTimeout(f,e)}}function p(t,e){this.body=t,this.direction=e,this.ateApple=!1,this.draw=function(){s.save(),s.fillStyle="#ff0000";for(var t=0;t<this.body.length;t++)e=s,i=this.body[t],0,o=i[0]*d,n=i[1]*d,e.fillRect(o,n,d,d);var e,i,o,n;s.restore()},this.advance=function(){var t=this.body[0].slice();switch(this.direction){case"left":--t[0];break;case"right":t[0]+=1;break;case"down":t[1]+=1;break;case"up":--t[1];break;default:throw"invalid direction"}this.body.unshift(t),this.ateApple?this.ateApple=!1:this.body.pop()},this.setDirection=function(t){var e;switch(this.direction){case"left":case"right":e=["up","down"];break;case"down":case"up":e=["left","right"];break;default:throw"invalid direction"}-1<e.indexOf(t)&&(this.direction=t)},this.checkCollision=function(){var t=!1,e=!1,i=this.body[0],o=this.body.slice(1),n=i[0],s=i[1];(n<0||c-1<n||(s<0||h-1<s))&&(t=!0);for(var r=0;r<o.length;r++)n===o[r][0]&&s===o[r][1]&&(e=!0);return t||e},this.isEatingApple=function(t){var e=this.body[0];return e[0]===t.position[0]&&e[1]===t.position[1]}}function u(t){this.position=t,this.draw=function(){s.save(),s.fillStyle="#33cc33",s.beginPath();var t=d/2,e=this.position[0]*d+t,i=this.position[1]*d+t;s.arc(e,i,t,0,2*Math.PI,!0),s.fill(),s.restore()},this.setNewPosition=function(){var t=Math.round(Math.random()*(c-1)),e=Math.round(Math.random()*(h-1));this.position=[t,e]},this.isOnSnake=function(t){for(var e=!1,i=0;i<t.body.length;i++)this.position[0]===t.body[i][0]&&this.position[1]===t.body[i][1]&&(e=!0);return e}}(t=document.createElement("canvas")).width=a,t.height=l,t.style.border="30px solid gray",t.style.margin="50px auto",t.style.display="block",t.style.backgroundColor="#ddd",document.body.appendChild(t),s=t.getContext("2d"),i=new p([[6,4],[5,4],[4,4],[3,4],[2,4]],"right"),o=new u([10,10]),n=0,f(),document.onkeydown=function(t){var e;switch(t.keyCode){case 37:e="left";break;case 38:e="up";break;case 39:e="right";break;case 40:e="down";break;case 32:return i=new p([[6,4],[5,4],[4,4],[3,4],[2,4]],"right"),o=new u([10,10]),n=0,clearTimeout(r),void f();default:return}i.setDirection(e)}};